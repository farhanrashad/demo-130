<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="res_config_settings_view_form" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.inherit.account.analytic.default</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="account.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('settings')]" position="inside">
                <h2 class="mt32">Sales Commission</h2>
                <div class="row mt16 o_settings_container">
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_right_pane">
                            <label for="sale_commission_account"/>
                            <div class="text-muted">
                                Commission Account
                            </div>
                            <div class="content-group">
                                <div class="mt16">
                                    <field name="sale_commission_account" class="o_light_label"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_right_pane">
                            <label for="commission_pay_by"/>
                            <div class="text-muted">
                                Commission Pay By
                            </div>
                            <div class="content-group">
                                <div class="mt16">
                                    <field name="commission_pay_by" class="o_light_label"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>

    <record id="open_commission_order" model="ir.ui.view">
        <field name="name">commission.rule.group</field>
        <field name="model">commission.rule</field>
        <field name="arch" type="xml">
            <form string="Commission Rule Group">
                <sheet>
                    <group col="4">
                        <field name="name"/>
                        <field name="logged_user"/>
                    </group>
                    <notebook>
                        <page string="Rules">
                            <field name="commission_order_line">
                                <tree string="Rules" editable="bottom">
                                    <field name="priority"/>
                                    <field name="apply_on"/>
                                    <field name="date_to"/>
                                    <field name="date_from"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <notebook>
                        <page>
                            <field name="notes" class="oe_inline"
                                   placeholder="An administrator can set up default Terms and conditions in your Company settings."/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="open_internalprocessing_tree" model="ir.ui.view">
        <field name="name">commission.rule.group</field>
        <field name="model">commission.rule</field>
        <field name="arch" type="xml">
            <tree string="Commission Rule Group Tree">
                <field name="name"/>
            </tree>
        </field>
    </record>


    <record id="open_internalprocessing_order" model="ir.actions.act_window">
        <field name="name">Commission Rule Group</field>
        <field name="res_model">commission.rule</field>
        <field name="binding_view_types">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="open_internalprocessing_tree"/>
    </record>

    <menuitem action="open_internalprocessing_order" id="commission_form_rule_group"
              parent="point_of_sale.menu_point_config_product" name="Commission Rule Group"/>


    <record id="pos_config_view_form" model="ir.ui.view">
        <field name="name">pos_config_view_form.default</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet" position="inside">
                <h2>Commission</h2>
                <div class="row mt16 o_settings_container">
                    <div id="company" class="col-12 col-lg-6 o_setting_box">
                        <div>
                            Set Commission rule group which will apply while Calculate Commission
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="commission_rule_group"/>
                            <field name="commission_rule_group"/>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>

    <record id="view_pos_line_inherit" model="ir.ui.view">
        <field name="name">pos.order.form12</field>
        <field name="model">pos.order</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="POS Sales Commission">
                    <field name="pos_sale_line">
                        <tree string="POS Sales Commission" editable="bottom">
                            <field name="user_id"/>
                            <field name="job_position"/>
                            <field name="commission_amount"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record id="open_create_rule_order_view_form" model="ir.ui.view">
        <field name="name">open create rule order view form</field>
        <field name="model">create.rule.form</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div>
                        <group col="4">
                            <field name="apply_on" widget="radio"/>
                            <field name="priority"/>
                        </group>
                    </div>
                    <group col="4">
                        <field name="start_date"/>
                        <field name="minimum_order"/>
                        <field name="end_date"/>
                    </group>
                    <notebook>
                        <page string="Beneficial">
                            <field name="rule_line">
                                <tree editable="bottom">
                                    <field name="employee_id"/>
                                    <field name="job_title"/>
<!--                                    <field name="user_id"/>-->
                                    <field name="compute_price"/>
                                    <field name="commission_price"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>


    <record id="open_create_rule_tree" model="ir.ui.view">
        <field name="name">Create Rule tree view</field>
        <field name="model">create.rule.form</field>
        <field name="arch" type="xml">
            <tree string="Create Rule">
                <field name="apply_on"/>
            </tree>
        </field>
    </record>


    <record id="open_create_rule_order" model="ir.actions.act_window">
        <field name="name">Create Rule</field>
        <field name="res_model">create.rule.form</field>
        <field name="binding_view_types">form</field>
        <field name="view_mode">tree,form</field>
    </record>


    <menuitem id="menu_sale_commission"
              name="Sales Commission"
              parent="point_of_sale.menu_point_root"/>

    <menuitem id="menu_point_of_sale_customer"
              name="Create Rule"
              parent="de_pos_sales_commissions.menu_sale_commission"
              action="de_pos_sales_commissions.open_create_rule_order"/>


    <record id="open_commission_order_form" model="ir.ui.view">
        <field name="name">Commission</field>
        <field name="model">commission.form</field>
        <field name="arch" type="xml">
            <form string="Commission">
                <sheet>
                    <group col="4">
                        <field name="source_document"/>
                        <field name="employee_id"/>
                        <field name="invoice"/>
                        <field name="order_date"/>
                    </group>
                    <group col="4">
                        <field name="sales_amount"/>
                        <field name="commission_amount"/>
                        <field name="pay_by"/>
                        <field name="session_id"/>
                        <field name="config_id"/>
                    </group>
                    <group col="4">
                        <field name="pos_order" invisible="1"/>
                        <field name="payment_id" invisible="1"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="open_commission_tree" model="ir.ui.view">
        <field name="name">Commission</field>
        <field name="model">commission.form</field>
        <field name="arch" type="xml">
            <tree string="Commission">
                <field name="source_document"/>
                <field name="employee_id"/>
                <field name="invoice"/>
                <field name="order_date"/>
                <field name="sales_amount"/>
                <field name="commission_amount"/>
                <field name="pay_by"/>
            </tree>
        </field>
    </record>


    <record id="open_commission_order_action" model="ir.actions.act_window">
        <field name="name">Commission</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">commission.form</field>
        <field name="view_mode">tree,form</field>
    </record>


    <menuitem id="menu_commission"
              name="Commission"
              parent="de_pos_sales_commissions.menu_sale_commission"
              action="de_pos_sales_commissions.open_commission_order_action"/>


    <record id="open_sale_target_order_menue" model="ir.ui.view">
        <field name="name">Sales Target</field>
        <field name="model">sales.target.form</field>
        <field name="arch" type="xml">
            <form string="sales_target">
                <header>
                    <button name="set_draft" string="Done" type="object" class="btn-primary"
                            attrs="{'invisible': [('state', 'not in', 'draft')]}"/>
                    />

                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm"/>
                </header>
                <sheet>

                    <group col="4">
                        <field name="sales_person"/>
                        <field name="target_period"/>
                        <field name="start_date"/>
                        <field name="end_date"/>
                        <button name="generate_target_period" string="Generate Target Period" type="object"
                                class="btn-primary"
                        />

                    </group>

                    <notebook>
                        <page string="Target Lines">
                            <field name="sales_target_line">
                                <tree string="Target Lines" editable="bottom">
                                    <field name="start_target"/>
                                    <field name="end_target"/>
                                    <field name="target_amount"/>
                                    <field name="sale_amount"/>
                                    <field name="commission_amount"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="open_sales_target_tree" model="ir.ui.view">
        <field name="name">Sales Target</field>
        <field name="model">sales.target.form</field>
        <field name="arch" type="xml">
            <tree string="Create Rule">
                <field name="sales_person"/>
                <field name="target_period"/>
                <field name="start_date"/>
                <field name="end_date"/>
            </tree>
        </field>
    </record>


    <record id="open_sales_target_order" model="ir.actions.act_window">
        <field name="name">Sales Target</field>
        <field name="res_model">sales.target.form</field>
        <field name="binding_view_types">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="open_sales_target_tree"/>
    </record>


    <menuitem id="menu_sales_target"
              name="Sales Target"
              parent="de_pos_sales_commissions.menu_sale_commission"
              action="de_pos_sales_commissions.open_sales_target_order"/>


    <record id="create_commission_summary_form" model="ir.ui.view">
        <field name="name">commission.summary.wizard</field>
        <field name="model">commission.summary</field>
        <field name="arch" type="xml">
            <form string="Commission Payment">
                <group col="4">
                    <field name="start_date"/>
                    <field name="end_date"/>
                    <field name="all_employee"/>
                    <field name="employee_id" widget="many2many_tags" attrs="{'invisible': [('all_employee', '=', True)]}"/>
                </group>
                <footer>
                    <button name="create_invoice" string="Generate Invoices" type="object" class="btn-primary"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="create_commission_summary_wizard" model="ir.actions.act_window">
        <field name="name">Commission Payment</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">commission.summary</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="create_commission_summary_form"/>
        <field name="target">new</field>
    </record>


    <menuitem id="menu_commission_summary"
              name="Commission Payment"
              parent="de_pos_sales_commissions.menu_sale_commission"
              action="de_pos_sales_commissions.create_commission_summary_wizard"/>


    <record id="create_commission_report" model="ir.ui.view">
        <field name="name">commission.summary.report</field>
        <field name="model">commission.report</field>
        <field name="arch" type="xml">
            <form string="Print Commission Report">
                <group>
                    <group>
                        <field name="start_date"/>
                        <field name="employee_id"/>
                        <field name="status"/>
                    </group>
                    <group>
                        <field name="end_date"/>
                        <field name="session_id"/>
                    </group>
                </group>
                <footer>
                    <button name="generate_report" string="Generate Report" type="object" class="btn-primary"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="create_commission_summary_report" model="ir.actions.act_window">
        <field name="name">Commission Report</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">commission.report</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="create_commission_report"/>
        <field name="target">new</field>
    </record>


    <menuitem id="menu_commission_print_report"
              name="Print Commission Summary"
              parent="de_pos_sales_commissions.menu_sale_commission"
              action="de_pos_sales_commissions.create_commission_summary_report"/>

</odoo>