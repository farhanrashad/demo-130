<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="open_resupply_order" model="ir.ui.view">
            <field name="name">Re Supply Stock Form</field>
            <field name="model">resupply.stock</field>
            <field name="arch" type="xml">
                <form string="Re Supply Stock">
                 <header>
                    <button name="draft" string="Submit Request" type="object" class="btn-primary"
                        attrs="{'invisible': [('state', 'not in', 'draft')]}" groups="resupply_stock.group_dysf_request_user"
                         />
                     <button name="drafted" string="Set In Progress" type="object" class="btn-primary"
                        attrs="{'invisible': [('state', 'not in', 'waiting')]}" groups="resupply_stock.group_dysf_request_manager"
                        />
                     <button name="drafts" string="Set Request Done" type="object" class="btn-primary"
                        attrs="{'invisible': [('state', 'not in')]}" groups="resupply_stock.group_dysf_request_manager"
                        />
                        <button name="resetdraft" string="Reject" type="object" class="btn-primary"
                        attrs="{'invisible': [('state', 'not in', ('in_progress'))]}" groups="resupply_stock.group_dysf_request_manager"
                        />
                        
                        <button name="button_validate" string="Create Internal Transfer" type="object" class="btn-primary"
                        attrs="{'invisible': [('state', 'not in', 'in_progress')]}" groups="resupply_stock.group_dysf_request_manager"
                        />
                        
                        <field name="state"  widget="statusbar" statusbar_visible="draft,in_progress,done,cancel"/>
                  </header>
                  <sheet>
                    <field name="is_request_readonly" invisible="1"/>
                    <h1 class="d-none d-md-block">
                        <field name="get_id" attrs="{'invisible': [('get_id','=','/')]}"/>
                    </h1>
                    <group>
                        <group>
                            <field name="stock_location_ids" invisible="1"/>
                            <field name="logged_user" readonly="1"/>
                            <field name="dest_loc" domain="[('id', 'in', stock_location_ids)]"/>
                            <field name="int_loc" attrs="{'readonly': [('is_request_readonly', '=',True)]}" />
                        </group>
                    </group>            
                    <notebook>
                        <page string="Products">
                            <field name="product_line" attrs="{'readonly': [('is_request_readonly', '=',True)]}" context="{'default_int_loc': int_loc, 'default_dest_loc': dest_loc}">
                                <tree string="Products" editable="bottom" >
                                        <field name="stock" required='1'/>
                                        <field name="description"/>
                                        <field name="int_loc" required='1'/>
                                        <field name="dest_loc" required='1'/>
                                        <field name="qty" required='1' sum='Quantity'/>
                                        <field name="remarks"/>
                                </tree>
                            </field>
                            <group>
                                <field name='total_items'/>
                            </group>
                        </page>
                    </notebook>
                    <notebook>
                        <page string="Notes">
                            <field name="notes" class="oe_inline" placeholder="An administrator can set up default Terms and conditions in your Company settings." attrs="{'readonly': [('is_request_readonly', '=',True)]}"/>
                        </page>
                   </notebook>
                </sheet>
            
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
               </form>
            </field>
            </record>
            
            <record id="open_internalprocessing_tree" model="ir.ui.view">
                <field name="name">ReSupply Stock Tree</field>
                <field name="model">resupply.stock</field>
                <field name="arch" type="xml">
                    <tree string="ReSupply Stock Tree">
                         <field name="get_id" />
                        <field name="logged_user" />
                        <!-- <field name="date_to" /> -->
                        <!--  <field name="logged_user1" /> -->
                         <field name="date_from"  />
                         <field name="int_loc" />
                         <field name="dest_loc"/>
                         <field name="state"/>
                    </tree>
                </field>
            </record>
            
            
        
         
   
               
            <record id="open_internalprocessing_order" model="ir.actions.act_window">
                <field name="name">Re Supply Stock Form</field>
                <field name="res_model">resupply.stock</field>
                <field name="binding_view_types">form</field>
                <field name="view_mode">tree,form</field>
                <field name="view_id" ref="open_internalprocessing_tree"/>
            </record>
            
            <act_window id="action_IR"
                name="ReSupply Stock Request"
                res_model="resupply.stock"
                view_mode="tree,form"
                />    
            <menuitem name="Stock Request" id="menu_internal_menue" action="action_IR" sequence="-7" web_icon="resupply_stock,static/description/carpet.png" groups="resupply_stock.group_dysf_request_user,resupply_stock.group_dysf_request_manager"></menuitem>
            

                
            <!-- <menuitem id="create_process_note" 
                name="Carpet Processing Form" 
                parent="menu_internal_menue"
                action="open_internalprocessing_order"
                />  -->
            
            <record id="action_product_process_list" model="ir.actions.act_window">
                <field name="name">Resupply Stock request Order Lines</field>
                <field name="res_model">resupply.orderline</field>
                <field name="context">{'search_default_stock': [active_id]}</field>
                <!-- <field name="context">{'search_default_testing':1}</field> -->
                <!-- <field name="context">{'search_default_product_id': [active_id], 'default_product_id': active_id}</field> -->
                <field name="domain">[('state', 'in', ['draft','in_progress', 'done','cancel'])]</field>
            </record>
        
            <record id="action_product_process_list1" model="ir.actions.act_window">
                <field name="name">Resupply Stock Request Lines</field>
                <field name="res_model">resupply.orderline</field>
               <!--  <field name="context">{'search_default_stock': [active_id]}</field> -->
                <!-- <field name="context">{'search_default_testing':1}</field> -->
                <!-- <field name="context">{'search_default_product_id': [active_id], 'default_product_id': active_id}</field> -->
                <field name="domain">[('state', 'in', ['draft','in_progress', 'done','cancel'])]</field>
            </record>
            
            <record id="stock_picking_stock_req_form_inherit" model="ir.ui.view">
                <field name="name">stock.picking.form</field>
                <field name="model">stock.picking</field>
                <field name="priority" eval="70"/>
                <field name="inherit_id" ref="stock.view_picking_form"/>
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='origin']" position="after">
                        <field name="reference"/>
                    </xpath>
                </field>
            </record>

            <record id="stock_picking_vpicktree_inherit" model="ir.ui.view">
                <field name="name">stock.picking.tree</field>
                <field name="model">stock.picking</field>
                <field name="priority" eval="70"/>
                <field name="inherit_id" ref="stock.vpicktree"/>
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='origin']" position="after">
                        <field name="reference"/>
                    </xpath>
                </field>
            </record>  

    <record id="view_picking_internal_search_inherit_stock_resupply" model="ir.ui.view">
        <field name="name">stock.picking.search</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_internal_search"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <field name="reference"/>
            </xpath>
        </field>
    </record>
     </data>
</odoo>
   

