<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-extend="Orderline">
        <t t-jquery=".product-name" t-operation="replace">
            <span class="product-name">
                <t t-esc="line.get_product().variant_name"/>
                <t t-if="line.get_product().tracking!=='none'">
                    <i class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_green" t-if="line.has_valid_product_lot()"
                       aria-label="Valid product lot" role="img" title="Valid product lot"/>
                    <i class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_red" t-if="!line.has_valid_product_lot()"
                       aria-label="Invalid product lot" role="img" title="Invalid product lot"/>
                </t>
            </span>
        </t>
    </t>
    <t t-extend="Product">
        <t t-jquery=".product-name" t-operation="replace">
            <div class="product-name" t-attf-id="article_product_#{product.id}">
                <t t-esc="product.variant_name"/>
            </div>
        </t>
    </t>

    <t t-extend="OrderReceipt">
        <t t-jquery=".pos-receipt" t-operation="replace">
        <div class="pos-receipt">
            <t t-if='receipt.shop_image !== false'>
                <img class="pos-receipt-logo" t-att-src='receipt.shop_image' alt="Logo"/>
            </t>
            <t t-else="">
                <t t-if='receipt.company.logo'>
                    <img class="pos-receipt-logo" t-att-src='receipt.company.logo' alt="Logo"/>
                </t>
			</t>	
            <div class="pos-receipt-contact">
                <t t-if="order.pos.config.shop_id">
                    <!--<t t-if='receipt.shop_address.name'>
                        <div><t t-esc='receipt.shop_address.name' /></div>
                    </t>-->
                    <div>
						<t t-if='receipt.company.name'>
							<t t-esc='receipt.company.name' />
						</t>					
						<br/>
						<t t-if='receipt.company.vat'>
							<t t-esc='receipt.company.vat' />
						</t>
                    </div>
                    <div style="width: 65%;margin-left: 50px;">
                        <t t-if='receipt.shop_address.street'>
                            <t t-esc='receipt.shop_address.street'/>
                        </t>
                        <t t-if="receipt.shop_address.city">
                            <t t-esc='receipt.shop_address.city'/>
                        </t>
                    </div>
                    <t t-if='receipt.shop_address.phone'>
                        <div>Ph:<t t-esc='receipt.shop_address.phone' /></div>
                    </t>
                    <t t-if='receipt.header_html'>
                        <t t-raw='receipt.header_html' />
                    </t>
                    <t t-if='!receipt.header_html and receipt.header'>
                        <div><t t-esc='receipt.header' /></div>
                    </t>
                </t>
                <t t-else="">
                    <t t-if='receipt.company.contact_address'>
                        <div><t t-esc='receipt.company.contact_address' /></div>
                    </t>
                    <t t-if='receipt.company.phone'>
                        <div>Tel:<t t-esc='receipt.company.phone' /></div>
                    </t>
                    <t t-if='receipt.company.vat'>
                        <div>VAT:<t t-esc='receipt.company.vat' /></div>
                    </t>
                    <t t-if='receipt.company.email'>
                        <div><t t-esc='receipt.company.email' /></div>
                    </t>
                    <t t-if='receipt.company.website'>
                        <div><t t-esc='receipt.company.website' /></div>
                    </t>
                    <t t-if='receipt.header_html'>
                        <t t-raw='receipt.header_html' />
                    </t>
                    <t t-if='!receipt.header_html and receipt.header'>
                        <div><t t-esc='receipt.header' /></div>
                    </t>
                </t>
            </div>
            <br/>
            <div class="receipt-header">
                Sale Receipt
            </div>

            <div class="pos-details">
                <div class="pos-details-center" style="width:50%;">Sale Invoice#</div>
                <div class="pos-details-center" style="width:50%;">Date &amp; Time</div>
            </div>
            <div class="pos-details-line">
                <div class="pos-details-center" style="width:50%;">
                    <t t-esc='receipt.name'/>
                </div>
                <div class="pos-details-center" style="width:50%;">
                    <t t-esc="moment(order.creation_date).format('DD-MMM-YYYY hh:mm:ss A')"/>
                </div>
            </div>
            <br/>
            <div class="pos-details">
                <div style="width:33%;">Payment Mode</div>
                <div class="pos-details-center" style="width:33%;">User Name</div>
                <div class="pos-details-right" style="width:33%;">POS Name</div>
            </div>
            <div class="pos-details-line">
                <div style="width:33%;">
                    <t t-foreach='paymentlines' t-as='line'>
                        <t t-esc='line.name'/>
                    </t>
                </div>
                <div class="pos-details-center" style="width:33%;">
                    <t t-esc='receipt.cashier'/>
                </div>
                <div class="pos-details-right" style="width:33%;">
                    <t t-esc='order.pos.config.name'/>
                </div>
            </div>
            <br/>
            <div class="pos-customer">
                Customer <span t-esc='receipt.client'/>
                <span t-esc="receipt.client_phone"/>
            </div>
            <div class="pos-orderline">
                <div style="width:40%;">Particulars</div>
                <div style="width:10%;">ST%</div>
                <div style="width:15%;">Qty</div>
                <div style="width:20%;">Price</div>
                <div style="width:15%;">Total</div>
            </div>
            <t set="total_qty" t-value="0.0"/>
            <t t-foreach='receipt.orderlines' t-as='line'>
            <t set="total_qty" t-value="total_qty + line.quantity"/>
            <div class="pos-line">
                <div style="width:40%;">
                    <t t-esc='line.variant_name'/>
                    <div t-if="line.note">
                        <t t-if="pos.config.print_notes == 1">
                            <div>
                                <i class="fa fa-tag">
                                    <t t-esc="line.note"/>
                                </i>
                            </div>
                        </t>
                    </div>
                </div>
                <div style="width:10%;text-align:center;">
                    <t t-esc='line.tax_amount_total'/>%
                </div>
                <div class="line-right" style="width:10%;">
                    <t t-esc='line.quantity'/>
                </div>
                <div class="line-right" style="width:20%;">
                    <t t-esc="widget.format_currency_no_symbol(line.price)"/>
                </div>
                <div class="line-right" style="width:20%;">
                    <t t-esc='widget.format_currency_no_symbol(line.price * line.quantity)'/>
                </div>
            </div>
            <!-- <div class="pos-discount">
                <div style="width:60%">Discount</div>
                <div style="width:20%"><t t-esc="widget.format_currency_no_symbol(line.line_discount)"/></div>
                <div style="width:20%"><t t-esc="widget.format_currency_no_symbol(line.line_discount * line.quantity)"/></div>
            </div> -->
            </t>
            <div class="line"></div>
            <div class="receipt-amount">
                <span>Items: <t t-esc="receipt.orderlines.length" /> | Qty: <t t-esc="receipt.total_qty"/></span>
                <!-- <span class="pos-receipt-saving">Saving: <t t-esc='widget.format_currency(receipt.total_disc)'/></span> -->
                <span class="pos-receipt-right-align pos-total" t-esc='widget.format_currency(receipt.subtotal)'/>
            </div>
            <div class="pos-receipt-paid">
                Total Sales Tax
                <span t-esc='widget.format_currency_no_symbol(receipt.total_tax)' class="pos-receipt-right-align"/>
            </div>
            <div class="line" style="margin-left: 77px;width: 225px;"></div>
            <div class="pos-receipt-paid" style="font-size: 14px;font-weight: 800;margin-top: 5px;">
                Net Amount
                <span t-esc='widget.format_currency_no_symbol(receipt.total_tax + receipt.subtotal)' class="pos-receipt-right-align"/>
            </div>
            <t t-foreach='paymentlines' t-as='line'>
                <div class="pos-receipt-paid">
                    Paid by <t t-esc='line.name'/> (Rounded):
                    <span t-esc='widget.format_currency_no_symbol(line.get_amount())' class="pos-receipt-right-align"/>
                </div>
            </t>
            <div class="pos-receipt-paid">
                CASH Back:
                <span t-esc='widget.format_currency(receipt.change)' class="pos-receipt-right-align"/>
            </div>
            <div class="line"></div>
            <!-- <div class="tax-content">
                <div class="tax-header">Amount Before Sales Tax</div>
                <div class="tax-header">Total Sales Tax</div>
            </div>
            <div class="line"></div>
            <div class="tax-content">
                <div class="tax-header">
                    <span t-esc='widget.format_currency(receipt.total_without_tax)'/>
                </div>
                <div class="tax-header">
                    <span t-esc='widget.format_currency(receipt.total_tax)'/>
                </div>
            </div> -->
            <!-- <div class="line"/>
            <div class="pos-receipt-order-data">
                <div>
                    <span t-esc="receipt.name"/>
                    <img t-if="receipt.name" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN13', receipt.name, 300, 50)" style="width:100%;height:35%;" alt="Barcode"/>
                </div>
            </div> -->
            <!-- <div class="line"></div> -->
            <div class="receipt-terms">
                No Exchange without Receipt. Goods Sold are not<br/>
                Refundable. Exchange within 14 Days of<br/>
                Purchase. No Exchange or Return on Sale Items.<br/>
                Visit online Shop<br/>
                <t t-esc='receipt.company.website'/>
            </div>
            <div style="text-align: center;">
                <img style="margin-top: 15px;width: 280px;height: 80px;" t-att-src="receipt.barcode"/>
            </div>
            <div class="footer_date_time">
                <div class="date">Print Date : <t t-esc="moment(order.creation_date).format('DD-MMM-YYYY')"/></div>
                <div class="time">Print Time : <t t-esc="moment(order.creation_date).format('hh:mm:ss A')"/></div>
            </div>
            <div class="line"></div>
            <div>
			<t t-if="receipt.note">
				<div>
					<t t-if="pos.config.print_notes == 1">
						<span>
							Note:<t t-esc="receipt.note"/>
						</span>
					</t>
				</div>
            </t>
			</div>
            <div class="line"></div>
			<div class="receipt-terms">
                Powered By: Dymaxel Systems (Pvt.) Ltd.<br/>
				<br/>
            </div>
        </div>
    </t>
    </t>
</templates>