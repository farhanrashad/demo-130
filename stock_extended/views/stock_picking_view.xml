<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.ui.view" id="view_stock_quant_extended_view_form">
        <field name="name">stock.quant.extended.form</field>
        <field name="model">stock.quant</field>
        <field name="inherit_id" ref="stock.view_stock_quant_form"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="barcode"/>
            </field>
        </field>
    </record>

    <record model="ir.ui.view" id="view_stock_quant_tree_extended">
        <field name="name">stock.quant.tree.extended</field>
        <field name="model">stock.quant</field>
        <field name="inherit_id" ref="stock.view_stock_quant_tree_editable"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="barcode"/>
            </field>
        </field>
    </record>

    <record id="quant_search_extended_view" model="ir.ui.view">
        <field name="name">stock.quant.extended.search</field>
        <field name="model">stock.quant</field>
        <field name="inherit_id" ref="stock.quant_search_view"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="barcode"/>
            </field>
        </field>
    </record>

    <record id="view_report_pos_order_extended_search" model="ir.ui.view">
        <field name="name">report.pos.order.extended.search</field>
        <field name="model">report.pos.order</field>
        <field name="inherit_id" ref="point_of_sale.view_report_pos_order_search"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="barcode"/>
            </field>
        </field>
    </record>

    <record id="stock_valuation_layer_extended_form" model="ir.ui.view">
        <field name="name">stock.valuation.layer.extended.form</field>
        <field name="model">stock.valuation.layer</field>
         <field name="inherit_id" ref="stock_account.stock_valuation_layer_form"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="barcode"/>
            </field>
        </field>
    </record>

    <record id="stock_valuation_layer_extended_tree" model="ir.ui.view">
        <field name="name">stock.valuation.layer.extended.tree</field>
        <field name="model">stock.valuation.layer</field>
        <field name="inherit_id" ref="stock_account.stock_valuation_layer_tree"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="barcode"/>
            </field>
        </field>
    </record>

    <record id="stock_valuation_layer_extended_search" model="ir.ui.view">
        <field name="name">stock.valuation.layer.extended.search</field>
        <field name="model">stock.valuation.layer</field>
        <field name="inherit_id" ref="stock_account.view_inventory_valuation_search"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="before">
                <field name="barcode"/>
                <filter string="Product Barcode" name="group_by_barcode" context="{'group_by':'barcode'}"/>
            </xpath>
        </field>
    </record>

    <record id="stock_picking_barcode_extended" model="ir.ui.view">
        <field name="name">stock.picking.extended.barcode</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook/page/field[@name='move_ids_without_package']/tree/field[@name='product_id']" position="after">
                <field name='barcode' readonly='1' force_save='1'/>
            </xpath>
            <xpath expr="//notebook/page/field[@name='move_ids_without_package']/tree/field[@name='product_uom_qty']" position="attributes">
                <attribute name="sum">"Total Product Qty"</attribute>
            </xpath>
            <xpath expr="//notebook/page/field[@name='move_ids_without_package']/tree/field[@name='quantity_done']" position="attributes">
                <attribute name="sum">"Quantity Done"</attribute>
            </xpath>
            <xpath expr="//notebook/page/field[@name='move_ids_without_package']/tree/field[@name='reserved_availability']" position="attributes">
                <attribute name="sum">"Reserved Availability"</attribute>
            </xpath>
            <xpath expr="//field[@name='move_ids_without_package']" position="after">
                <group>
                    <field name='total_items'/>
                </group>
            </xpath>
        </field>
    </record>

    <template id="report_picking_operation_template" inherit_id="stock.report_picking">
        <xpath expr="//table/thead/tr/th[@name='th_product']" position="after">
           <th name="th_barcode">
                <strong>Barcode</strong>
            </th>
        </xpath>
        <xpath expr="//table/tbody/t/t/tr/td[1]" position="after">
           <td>
                <span t-esc="ml.product_id.barcode"/>
            </td>
        </xpath>
        <xpath expr="//t[@t-set='no_reserved_product']" position="before">
           <p>
                <th> Total Items : </th><td t-esc="o.total_items"/> <br/>
            </p>
            <p>
                <th> Total Qty : </th><td t-esc="sum(o.move_lines.mapped('product_uom_qty'))"/> 
            </p>
        </xpath>
    </template>

    <template id="report_picking_delivery_template" inherit_id="stock.report_delivery_document">
        <xpath expr="//table/thead/tr/th[@name='th_sm_product']" position="after">
            <th name="th_barcode">
                <strong>Barcode</strong>
            </th>
        </xpath>
        <xpath expr="//table/tbody/tr/td[1]" position="inside">
           <td>
                <span t-field="move.product_id.barcode"/>
            </td>
        </xpath>
        <xpath expr="//table[hasclass('table-sm')]/thead/tr/th[@name='th_sml_product']" position="after">
            <th name="th_sml_barcode">
                <strong>Barcode</strong>
            </th>
        </xpath>
        <xpath expr="//table[@name='stock_move_line_table']/tbody/tr/td[1]" position="inside">
           <td>
                <span t-field="move_line.product_id.barcode"/>
            </td>
        </xpath>
        <xpath expr="//table[@name='stock_move_line_table']" position="after">
           <p>
                <th> Total Items : </th><td t-esc="o.total_items"/> <br/>
            </p>
            <p>
                <th> Total Qty : </th><td t-esc="sum(o.move_lines.mapped('product_uom_qty'))"/> 
            </p>
        </xpath>
    </template>

</odoo>